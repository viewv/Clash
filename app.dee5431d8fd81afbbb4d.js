(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+nr4":function(e,t,n){e.exports={content:"_38eRjlSxqU",overlay:"_2cugp_ojFQ"}},0:function(e,t,n){n("bZMm"),e.exports=n("ERIh")},"1iZa":function(e,t,n){e.exports={btn:"_3RK6Pn_rfX"}},"1mhx":function(e,t,n){e.exports={TrafficNow:"_3uGf10f84P",down:"_30JMM9GgkW",up:"_1wybRgv0kl"}},"2UkG":function(e,t,n){e.exports={loading:"C8qYV83bFf",pulse:"_3ZgNvq3EI4",pulseScaleOut:"_1TUw6u7qIP"}},"31Hy":function(e,t,n){e.exports={root:"_3oXtG6fVlC"}},"3enP":function(e,t,n){e.exports={root:"_3tUhhoh39M",header:"_1jIFhvdOto",label:"XmDiVyKWwU",inputs:"_3IJhbo4w3s",footer:"_2QbR27nKyF"}},"5Wrh":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),c=n.n(o),i=n("1iZa"),s=n.n(i),l=function(){},u=r.a.memo(function(e){var t=e.label,n=e.onClick,a=void 0===n?l:n;return r.a.createElement("button",{className:s.a.btn,onClick:a},t)});u.propTypes={label:c.a.string.isRequired,onClick:c.a.func},t.a=u},"8dWu":function(e,t,n){},BCVB:function(e,t,n){e.exports={root:"_3KeIuWaGkq",h1:"dzHwHz5D1B"}},BN1O:function(e,t,n){e.exports={input:"_3rwuJToU6r"}},DKqX:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),c=n.n(o),i=n("BCVB"),s=n.n(i);function l(e){var t=e.title;return r.a.createElement("div",{className:s.a.root},r.a.createElement("h1",{className:s.a.h1},t))}l.propTypes={title:c.a.string.isRequired},t.a=r.a.memo(l)},EJpJ:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("vpQ4"),r={"Content-Type":"application/json"};function o(e){var t=e.hostname,n=e.port,o=e.secret;return{url:function(e){var t=e.hostname,n=e.port;return"http://".concat(t,":").concat(n)}({hostname:t,port:n}),init:{headers:function(e){var t=e.secret,n=Object(a.a)({},r);return t&&(n.Authorization="Bearer ".concat(t)),n}({secret:o})}}}},EQlU:function(e,t,n){"use strict";n("VRzm"),n("XfO3"),n("rGqo"),n("yt8O"),n("RW0V");var a=n("rePB"),r=n("vpQ4"),o=n("o0o1"),c=n.n(o),i=(n("ls82"),n("HaE+")),s=n("EJpJ"),l="/proxies";function u(e){return d.apply(this,arguments)}function d(){return(d=Object(i.a)(c.a.mark(function e(t){var n,a,r,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(t),a=n.url,r=n.init,e.next=3,fetch(a+l,r);case 3:return o=e.sent,e.next=6,o.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function p(e,t,n){return f.apply(this,arguments)}function f(){return(f=Object(i.a)(c.a.mark(function e(t,n,a){var o,i,u,d,p;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={name:a},i=Object(s.a)(t),u=i.url,d=i.init,p="".concat(u).concat(l,"/").concat(n),e.next=5,fetch(p,Object(r.a)({},d,{method:"PUT",body:JSON.stringify(o)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function h(e,t){return m.apply(this,arguments)}function m(){return(m=Object(i.a)(c.a.mark(function e(t,n){var a,r,o,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(s.a)(t),r=a.url,o=a.init,"timeout=5000&url=http://www.google.com/generate_204",i="".concat(r).concat(l,"/").concat(n,"/delay?").concat("timeout=5000&url=http://www.google.com/generate_204"),e.next=5,fetch(i,o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var v=n("p19a");n.d(t,"d",function(){return w}),n.d(t,"c",function(){return y}),n.d(t,"e",function(){return O}),n.d(t,"b",function(){return C}),n.d(t,"g",function(){return N}),n.d(t,"f",function(){return T}),n.d(t,"a",function(){return _});var b=["DIRECT","GLOBAL","REJECT"],g=["Fallback","URLTest","Selector"],w=function(e){return e.proxies.proxies},y=function(e){return e.proxies.delay},O=function(e){return e.proxies.groupNames},E="proxies/CompletedFetchProxies",x="proxies/OptimisticSwitchProxy",j="proxies/CompletedRequestDelayForProxy";function k(e){var t=[];for(var n in e)if(b.indexOf(n)<0){var a=e[n];g.indexOf(a.type)>=0&&t.push(n)}return t}function C(){return function(){var e=Object(i.a)(c.a.mark(function e(t,n){var a,r,o,i,s,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=Object(v.b)(a),e.next=4,u(r);case 4:o=e.sent,i=o.proxies,l=k(s=void 0===i?{}:i),t({type:E,payload:{proxies:s,groupNames:l}});case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}function N(e,t){return function(){var n=Object(i.a)(c.a.mark(function n(a,o){var i,s;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:p(Object(v.b)(o()),e,t).then(function(e){!1===e.ok&&console.log("failed to swith proxy",e.statusText)},function(e){console.log(e,"failed to swith proxy")}).then(function(){a(C())}),i=w(o()),(s=Object(r.a)({},i))[e]&&s[e].now&&(s[e].now=t),a({type:x,payload:{proxies:s}});case 6:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}()}function S(e){return function(){var t=Object(i.a)(c.a.mark(function t(n,o){var i,s,l,u,d,p,f;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(v.b)(o()),t.next=3,h(i,e);case 3:return s=t.sent,l="",!1===s.ok&&(l=s.statusText),t.next=8,s.json();case 8:u=t.sent,d=u.delay,p=y(o()),f=Object(r.a)({},p,Object(a.a)({},e,{error:l,number:d})),n({type:j,payload:{delay:f}});case 13:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}function T(){return function(){var e=Object(i.a)(c.a.mark(function e(t,n){var a,r,o,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=w(a),o=Object.keys(r),s=[],o.forEach(function(e){"Vmess"!==r[e].type&&"Shadowsocks"!==r[e].type||s.push(e)}),e.next=7,Promise.all(s.map(function(e){return t((a=e,n=Object(i.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(S(a));case 2:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}));var n,a}));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}var I={proxies:{},delay:{},groupNames:[]};function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case j:case x:case E:return Object(r.a)({},e,a);default:return e}}},ERIh:function(e,t,n){"use strict";n.r(t);n("ewTs");var a=n("q1tI"),r=n.n(a),o=n("i8i4"),c=n.n(o),i=n("9rZX"),s=n.n(i),l=n("u4Dv"),u=n("55Ip"),d=n("Ty5D"),p=n("wSuE"),f=n("17x9"),h=n.n(f),m=n("2UkG"),v=n.n(m),b=function(e){var t=e.height,n=t?{height:t}:{};return r.a.createElement("div",{className:v.a.loading,style:n},r.a.createElement("div",{className:v.a.pulse}))};b.propTypes={height:h.a.string};var g,w=b,y=n("o0o1"),O=n.n(y),E=(n("ls82"),n("HaE+")),x=n("1OyB"),j=n("vuIU"),k=n("md7G"),C=n("foSv"),N=n("Ji7U"),S=n("JX7q"),T=n("rePB"),I="https://7068a15928ae45cf884dd8398fe8649c@sentry.io/1359284";function _(){return R.apply(this,arguments)}function R(){return(R=Object(E.a)(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=2;break}return e.abrupt("return",g);case 2:return e.next=4,n.e(7).then(n.t.bind(null,"abTI",7));case 4:return(t=e.sent).init({dsn:I}),g=t,e.abrupt("return",g);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}n("tUrg");var B=n("SXSQ"),P=n("4BeY"),D=n.n(P),A=n("IaFt"),M=n.n(A),q=new D.a({id:"yacd",use:"yacd-usage",viewBox:"0 0 320 320",content:'<symbol viewBox="0 0 320 320" xmlns="http://www.w3.org/2000/svg" id="yacd">\n  <g fill="none" fill-rule="evenodd">\n    <path d="M68.142 52.056c9.396-1.515 29.798 27.762 45.809 57.699 18.907-8.164 75.199-7.859 97.664 0 4.799-15.898 28.706-58.455 38.546-57.699 4.065.09 13.145 32.285 23.568 96.695 2.793 17.259 6.883 48.36 12.271 93.305C245.489 260.019 203.995 269 161.518 269c-42.477 0-84.983-8.981-127.518-26.944 16.497-125.657 27.878-188.99 34.142-190z" stroke="#EEE" stroke-width="5" fill="currentColor" />\n    <circle stroke="#EEE" fill="#EEE" cx="226" cy="184" r="15" />\n    <circle stroke="#EEE" fill="#EEE" cx="103" cy="184" r="15" />\n    <path d="M163 214.042c2.067 0 4.637 6.54 10.108 6.54 4.567.16 5.383-1.65 7.074-1.677 1.656 0 1.818 1.174 1.818 1.677.027 2.166-5.347 3.686-8.349 3.418-7.475.101-9.703-5.451-10.651-5.451-.91 0-3.833 5.451-10.194 5.451-7.143-.113-8.799-1.471-8.799-3.099.01-.783.802-1.54 1.685-1.505 1.39-.041 4.576 1.027 7.35 1.038 3.585-.016 8.163-6.392 9.958-6.392z" fill="#FFF" />\n  </g>\n</symbol>'}),J=(M.a.add(q),q),L=new D.a({id:"github",use:"github-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" id="github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" /></symbol>'}),U=(M.a.add(L),L),z=n("a/9k"),F=n.n(z),H="https://github.com/haishanh/yacd/issues";var G=function(){return r.a.createElement("div",{className:F.a.root},r.a.createElement("div",{className:F.a.yacd},r.a.createElement(B.a,{id:J.id,width:150,height:150})),r.a.createElement("h1",null,"Oops, something went wrong!"),r.a.createElement("p",null,"If you think this is a bug, reporting this at"," ",r.a.createElement("a",{className:F.a.link,href:H},r.a.createElement(B.a,{id:U.id,width:16,height:16}),"haishanh/yacd")))},X=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(k.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r))),Object(T.a)(Object(S.a)(Object(S.a)(n)),"state",{error:null}),Object(T.a)(Object(S.a)(Object(S.a)(n)),"loadSentry",Object(E.a)(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.sentry){e.next=2;break}return e.abrupt("return",n.sentry);case 2:return e.next=4,_();case 4:return t=e.sent,n.sentry=t,e.abrupt("return",n.sentry);case 7:case"end":return e.stop()}},e,this)}))),Object(T.a)(Object(S.a)(Object(S.a)(n)),"showReportDialog",function(){n.loadSentry().then(function(e){return e.showReportDialog()})}),n}return Object(N.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.error?r.a.createElement(G,null):this.props.children}}]),t}(a.Component);Object(T.a)(X,"propTypes",{children:h.a.node});var V=X,W=n("p19a"),K=new D.a({id:"activity",use:"activity-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="activity"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12" /></symbol>'}),Q=(M.a.add(K),K),Z=new D.a({id:"settings",use:"settings-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="settings"><circle cx="12" cy="12" r="3" /><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" /></symbol>'}),Y=(M.a.add(Z),Z),$=n("fvtS"),ee=new D.a({id:"file",use:"file-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="file"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" /><polyline points="14 2 14 8 20 8" /><line x1="16" y1="13" x2="8" y2="13" /><line x1="16" y1="17" x2="8" y2="17" /><polyline points="10 9 9 9 8 9" /></symbol>'}),te=(M.a.add(ee),ee),ne=new D.a({id:"command",use:"command-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="command"><path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z" /></symbol>'}),ae=(M.a.add(ne),ne),re=new D.a({id:"moon",use:"moon-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" /></symbol>'}),oe=(M.a.add(re),re),ce=n("oPlX"),ie=n.n(ce),se=r.a.memo(function(e){var t=e.iconId,n=e.labelText,a=e.to;return r.a.createElement(u.b,{exact:!0,to:a,className:ie.a.row,activeClassName:ie.a.rowActive},r.a.createElement(B.a,{id:t,width:28,height:28}),r.a.createElement("div",{className:ie.a.label},n))});se.propTypes={to:h.a.string.isRequired,iconId:h.a.string,labelText:h.a.string};var le={switchTheme:W.d};var ue=r.a.memo(function(){var e=Object(l.b)(le).switchTheme;return r.a.createElement("div",{className:ie.a.root},r.a.createElement("a",{href:"https://github.com/haishanh/yacd",className:ie.a.logoLink,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("div",{className:ie.a.logo},r.a.createElement(B.a,{id:J.id,width:80,height:80}))),r.a.createElement("div",{className:ie.a.rows},r.a.createElement(se,{to:"/",iconId:Q.id,labelText:"Overview"}),r.a.createElement(se,{to:"/proxies",iconId:$.a.id,labelText:"Proxies"}),r.a.createElement(se,{to:"/rules",iconId:ae.id,labelText:"Rules"}),r.a.createElement(se,{to:"/configs",iconId:Y.id,labelText:"Config"}),r.a.createElement(se,{to:"/logs",iconId:te.id,labelText:"Logs"})),r.a.createElement("div",{className:ie.a.themeSwitchContainer,onClick:e},r.a.createElement(B.a,{id:oe.id,width:20,height:20})))}),de=n("DKqX"),pe=n("vpQ4"),fe=(n("xfY5"),n("eHKK"),["B","KB","MB","GB","TB","PB","EB","ZB","YB"]),he=function(e){if(e<1e3)return e+" B";var t=Math.min(Math.floor(Math.log10(e)/3),fe.length-1);return(e=Number((e/Math.pow(1e3,t)).toPrecision(3)))+" "+fe[t]},me=n("Jf6s"),ve=n("QNKb"),be=Object(ve.unstable_createResource)(function(){return n.e(6).then(n.t.bind(null,"JVhT",7)).then(function(e){return e.default})}),ge={0:{down:{backgroundColor:"rgba(176, 209, 132, 0.8)",borderColor:"rgb(176, 209, 132)"},up:{backgroundColor:"rgba(181, 220, 231, 0.8)",borderColor:"rgb(181, 220, 231)"}},1:{up:{backgroundColor:"rgba(242, 174, 62, 0.3)",borderColor:"rgb(242, 174, 62)"},down:{backgroundColor:"rgba(69, 154, 248, 0.3)",borderColor:"rgb(69, 154, 248)"}},2:{up:{backgroundColor:"rgba(94, 175, 223, 0.3)",borderColor:"rgb(94, 175, 223)"},down:{backgroundColor:"rgba(139, 227, 195, 0.3)",borderColor:"rgb(139, 227, 195)"}}},we={borderWidth:1,pointRadius:0};var ye={responsive:!0,maintainAspectRatio:!0,title:{display:!1},legend:{display:!0,position:"top",labels:{fontColor:"#ccc",boxWidth:20}},tooltips:{enabled:!1,mode:"index",intersect:!1,animationDuration:100},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!1,gridLines:{display:!1}}],yAxes:[{display:!0,gridLines:{display:!0,color:"#555",borderDash:[3,6],drawBorder:!1},ticks:{callback:function(e){return he(e)+"/s "}}}]}},Oe={position:"relative",width:"90%"};function Ee(){var e=be.read(),t=Object(l.c)(W.b),n=t.hostname,o=t.port,c=t.secret,i=Object(l.c)(W.c);return Object(a.useEffect)(function(){var t=document.getElementById("trafficChart").getContext("2d"),a=Object(me.a)({hostname:n,port:o,secret:c}),r=function(){var e="dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark")?"0":"2";return Object(pe.a)({},we,ge[e].up,{label:"Up"})}(i),s=function(){var e="dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark")?"0":"2";return Object(pe.a)({},we,ge[e].down,{label:"Down"})}(i),l={labels:a.labels,datasets:[Object(pe.a)({},r,{data:a.up}),Object(pe.a)({},s,{data:a.down})]},u=new e(t,{type:"line",data:l,options:ye}),d=a.subscribe(function(){return u.update()});return function(){d(),u.destroy()}},[n,o,c,i]),r.a.createElement("div",{style:Oe},r.a.createElement("canvas",{id:"trafficChart"}))}var xe=n("ODXe"),je=n("1mhx"),ke=n.n(je);function Ce(){var e,t,n,o,c,i,s,u,d=(e=Object(a.useState)({upStr:"0 B/s",downStr:"0 B/s"}),t=Object(xe.a)(e,2),n=t[0],o=t[1],c=Object(l.c)(W.b),i=c.hostname,s=c.port,u=c.secret,Object(a.useEffect)(function(){return Object(me.a)({hostname:i,port:s,secret:u}).subscribe(function(e){return o({upStr:he(e.up)+"/s",downStr:he(e.down)+"/s"})})},[i,s,u]),n),p=d.upStr,f=d.downStr;return r.a.createElement("div",{className:ke.a.TrafficNow},r.a.createElement("div",{className:ke.a.up},r.a.createElement("div",null,"Upload"),r.a.createElement("div",null,p)),r.a.createElement("div",{className:ke.a.down},r.a.createElement("div",null,"Download"),r.a.createElement("div",null,f)))}var Ne=n("31Hy"),Se=n.n(Ne);function Te(){return r.a.createElement("div",null,r.a.createElement(de.a,{title:"Overview"}),r.a.createElement("div",{className:Se.a.root},r.a.createElement("div",null,r.a.createElement(Ce,null)),r.a.createElement("div",{className:Se.a.chart},r.a.createElement(a.Suspense,{fallback:r.a.createElement(w,{height:"200px"}),maxDuration:10},r.a.createElement(Ee,null)))))}var Ie=n("TSYQ"),_e=n.n(Ie),Re=n("iR1w"),Be=n("Kv4h"),Pe=(n("rGqo"),n("KKXr"),n("a1Th"),n("EJpJ")),De="/logs",Ae=new TextDecoder("utf-8",{stream:!0}),Me=function(){return Math.floor(65536*(1+Math.random())).toString(16)},qe=!1,Je=!1;function Le(e,t){return e.read().then(function(n){var a=n.done,r=n.value;if(!a)return Ae.decode(r).trim().split("\n").forEach(function(e){try{n=JSON.parse(e),a=t,r=new Date,o=r.toLocaleString("zh-Hans"),n.time=o,n.id=r-0+Me(),n.even=qe=!qe,a(n)}catch(t){console.log("JSON.parse error",JSON.parse(e))}var n,a,r,o}),Le(e,t);console.log("GET /logs streaming done")})}var Ue=n("II4a"),ze=n("G4qV"),Fe="logs/UpdateSearchText",He="logs/UpdateLogTail",Ge=300,Xe=function(e){return e.logs.logs},Ve=function(e){return e.logs.tail},We=function(e){return e.logs.searchText},Ke=Object(ze.a)(Xe,Ve,We,function(e,t,n){for(var a=[],r=t;r>=0;r--)a.push(e[r]);if(e.length===Ge)for(var o=Ge-1;o>t;o--)a.push(e[o]);return""===n?a:a.filter(function(e){return e.payload.toLowerCase().indexOf(n)>=0})});var Qe={searchText:"",logs:[],tail:-1};var Ze={updateSearchText:function(e){return{type:Fe,payload:{searchText:e.toLowerCase()}}}},Ye=Object(Ue.a)({mapStateToProps:function(e){return{searchText:We(e)}},actions:Ze}),$e=n("t8vU"),et=n.n($e),tt=30,nt={debug:"none",info:"#454545",warning:"#b99105",error:"#c11c1c"};function at(e){var t=e.time,n=e.even,a=e.payload,o=e.type,c=_e()({even:n},et.a.log);return r.a.createElement("div",{className:c},r.a.createElement("div",{className:et.a.logMeta},r.a.createElement("div",{className:et.a.logTime},t),r.a.createElement("div",{className:et.a.logType,style:{backgroundColor:nt[o]}},o),r.a.createElement("div",{className:et.a.logText},a)))}function rt(e,t){return t[e].id}var ot=Object(a.memo)(function(e){var t=e.index,n=e.style,a=e.data[t];return r.a.createElement("div",{style:n},r.a.createElement(at,a))},Re.b),ct={appendLog:function(e){return function(t,n){var a=n(),r=Xe(a),o=Ve(a),c=o>=Ge-1?0:o+1;r[c]=e,t({type:He,payload:{tail:c}})}}};function it(){var e=Object(l.c)(W.b),t=e.hostname,n=e.port,o=e.secret,c=Object(l.b)(ct).appendLog,i=Object(l.c)(Ke);Object(a.useEffect)(function(){!function(e,t){if(!Je){Je=!0;var n=Object(Pe.a)(e),a=n.url,r=n.init;fetch(a+De,r).then(function(e){Le(e.body.getReader(),t)}).catch(function(e){Je=!1,console.log("GET /logs error",e)})}}({hostname:t,port:n,secret:o},c)},[t,n,o]);var s=Object(Be.a)(),u=Object(xe.a)(s,2),d=u[0],p=u[1];return r.a.createElement("div",null,r.a.createElement(de.a,{title:"Logs"}),r.a.createElement(Ye,null),r.a.createElement("div",{ref:d,style:{paddingBottom:tt}},0===i.length?r.a.createElement("div",{className:et.a.logPlaceholder,style:{height:p-tt}},r.a.createElement("div",{className:et.a.logPlaceholderIcon},r.a.createElement(B.a,{id:J.id,width:200,height:200})),r.a.createElement("div",null,"No logs yet, hang tight...")):r.a.createElement("div",{className:et.a.logsWrapper},r.a.createElement(Re.a,{height:p-tt,width:"100%",itemCount:i.length,itemSize:80,itemData:i,itemKey:rt},ot))))}var st=n("oFgh"),lt=n("uSrA"),ut=n.n(lt),dt=function(){};function pt(e){var t=e.checked,n=void 0!==t&&t,a=e.onChange,o=void 0===a?dt:a,c=e.name,i=void 0===c?"":c;return r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",name:i,checked:n,className:ut.a.switch,onChange:o}))}pt.propTypes={checked:h.a.bool,onChange:h.a.func,name:h.a.string};var ft=r.a.memo(pt),ht=n("InNZ"),mt=n.n(ht);function vt(e){var t=e.options,n=e.value,o=e.name,c=e.onChange,i=Object(a.useRef)(null),s=(100/t.length).toPrecision(3);return r.a.createElement("div",null,r.a.createElement("div",{className:mt.a.ToggleSwitch},t.map(function(e,t){n===e.value&&(i.current=t);var a="".concat(o,"-").concat(e.label),s=0===t?"":"border-left";return r.a.createElement("label",{htmlFor:a,key:a,className:s},r.a.createElement("input",{id:a,name:o,type:"radio",value:e.value,checked:n===e.value,onChange:c}),r.a.createElement("div",null,e.label))}),r.a.createElement("a",{className:mt.a.slider,style:{width:s+"%",left:i.current*s+"%"}})))}vt.propTypes={options:h.a.array,value:h.a.string,name:h.a.string,onChange:h.a.func};var bt=r.a.memo(vt),gt=n("wx14"),wt=n("BN1O"),yt=n.n(wt);function Ot(e){return r.a.createElement("input",Object(gt.a)({className:yt.a.input},e))}Ot.propTypes={value:h.a.oneOfType([h.a.string,h.a.number]),type:h.a.string,onChange:h.a.func,name:h.a.string,placeholder:h.a.string};var Et=n("So2z"),xt=n.n(Et),jt=[{label:"Global",value:"Global"},{label:"Rule",value:"Rule"},{label:"Direct",value:"Direct"}],kt=[{label:"info",value:"info"},{label:"warning",value:"warning"},{label:"error",value:"error"},{label:"debug",value:"debug"},{label:"silent",value:"silent"}],Ct={fetchConfigs:st.b,updateConfigs:st.d},Nt=function(e){return{configs:Object(st.c)(e)}};function St(){var e=Object(l.b)(Ct).fetchConfigs,t=Object(l.c)(Nt).configs;return Object(a.useEffect)(function(){e()},[]),r.a.createElement(Tt,{configs:t})}function Tt(e){var t=e.configs,n=Object(l.b)(Ct).updateConfigs,o=Object(a.useState)(t),c=Object(xe.a)(o,2),i=c[0],s=c[1],u=Object(a.useState)(t),d=Object(xe.a)(u,2),p=d[0],f=d[1];p!==t&&(f(t),s(t));var h=function(e,t){s(Object(pe.a)({},i,Object(T.a)({},e,t)))};function m(e){var t=e.target,a=t.name,r=t.value;switch(t.name){case"allow-lan":r=t.checked,h(a,r),n(Object(T.a)({},a,r));break;case"mode":case"log-level":h(a,r),n(Object(T.a)({},a,r));break;case"redir-port":case"socks-port":case"port":if(""!==t.value){var o=parseInt(t.value,10);if(o<0||o>65535)return}h(a,r);break;default:return}}function v(e){var t=e.target,a=t.name,r=t.value;switch(a){case"port":case"socks-port":case"redir-port":var o=parseInt(r,10);if(o<0||o>65535)return;n(Object(T.a)({},a,o))}}return r.a.createElement("div",null,r.a.createElement(de.a,{title:"Config"}),r.a.createElement("div",{className:xt.a.root},r.a.createElement("div",null,r.a.createElement("div",{className:xt.a.label},"HTTP Proxy Port"),r.a.createElement(Ot,{name:"port",value:i.port,onChange:m,onBlur:v})),r.a.createElement("div",null,r.a.createElement("div",{className:xt.a.label},"SOCKS5 Proxy Port"),r.a.createElement(Ot,{name:"socks-port",value:i["socks-port"],onChange:m,onBlur:v})),r.a.createElement("div",null,r.a.createElement("div",{className:xt.a.label},"Redir Port"),r.a.createElement(Ot,{name:"redir-port",value:i["redir-port"],onChange:m,onBlur:v})),r.a.createElement("div",null,r.a.createElement("div",{className:xt.a.label},"Allow LAN"),r.a.createElement(ft,{name:"allow-lan",checked:i["allow-lan"],onChange:m})),r.a.createElement("div",null,r.a.createElement("div",{className:xt.a.label},"Mode"),r.a.createElement(bt,{options:jt,name:"mode",value:i.mode,onChange:m})),r.a.createElement("div",null,r.a.createElement("div",{className:xt.a.label},"Log Level"),r.a.createElement(bt,{options:kt,name:"log-level",value:i["log-level"],onChange:m}))))}Tt.propTypes={configs:h.a.object};var It=n("Ff2n"),_t=n("G8MJ"),Rt=n.n(_t);function Bt(e){var t=e.isOpen,n=e.onRequestClose,a=e.className,o=e.overlayClassName,c=e.children,i=Object(It.a)(e,["isOpen","onRequestClose","className","overlayClassName","children"]),l=_e()(a,Rt.a.content),u=_e()(o,Rt.a.overlay);return r.a.createElement(s.a,Object(gt.a)({isOpen:t,onRequestClose:n,className:l,overlayClassName:u},i),c)}Bt.propTypes={isOpen:h.a.bool.isRequired,onRequestClose:h.a.func.isRequired,children:h.a.node.isRequired,className:h.a.string,overlayClassName:h.a.string};var Pt=r.a.memo(Bt),Dt=n("5Wrh"),At=n("3enP"),Mt=n.n(At),qt=function(e){return{apiConfig:Object(W.b)(e)}};var Jt=function(){var e=Object(l.c)(qt).apiConfig,t=Object(a.useState)(e.hostname),n=Object(xe.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(e.port),s=Object(xe.a)(i,2),u=s[0],d=s[1],p=Object(a.useState)(e.secret),f=Object(xe.a)(p,2),h=f[0],m=f[1],v=Object(l.b)({updateClashAPIConfig:W.e}),b=Object(a.useRef)(null);Object(a.useEffect)(function(){b.current.focus()},[]);var g=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"port":d(a);break;case"hostname":c(a);break;case"secret":m(a)}};function w(){v.updateClashAPIConfig({hostname:o,port:u,secret:h})}return r.a.createElement("div",{className:Mt.a.root,ref:b,tabIndex:"1",onKeyDown:function(e){13===e.keyCode&&w()}},r.a.createElement("div",{className:Mt.a.header},"Clash External Controller Config"),r.a.createElement("div",{className:Mt.a.body},r.a.createElement("div",{className:Mt.a.group},r.a.createElement("div",{className:Mt.a.label},"Hostname and Port"),r.a.createElement("div",{className:Mt.a.inputs},r.a.createElement(Ot,{type:"text",name:"hostname",placeholder:"Hostname",value:o,onChange:g}),r.a.createElement(Ot,{type:"number",name:"port",placeholder:"Port",value:u,onChange:g}))),r.a.createElement("div",{className:Mt.a.group},r.a.createElement("div",{className:Mt.a.label},"Authorization Secret (Optional)"),r.a.createElement("div",null,r.a.createElement(Ot,{type:"text",name:"secret",value:h,placeholder:"Optional",onChange:g})))),r.a.createElement("div",{className:Mt.a.footer},r.a.createElement(Dt.a,{label:"Confirm",onClick:w})))},Lt=n("i53Z"),Ut=n("+nr4"),zt=n.n(Ut),Ft=function(e){return{modals:e.modals}},Ht={closeModal:Lt.a,fetchConfigs:st.b};function Gt(){var e=Object(l.c)(Ft).modals,t=Object(l.b)(Ht),n=t.closeModal,o=t.fetchConfigs;return Object(a.useEffect)(function(){o()},[]),r.a.createElement(Pt,{isOpen:e.apiConfig,className:zt.a.content,overlayClassName:zt.a.overlay,shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,onRequestClose:function(){return n("apiConfig")}},r.a.createElement(Jt,null))}var Xt=n("ANjH"),Vt=n("sINF"),Wt=n("EQlU"),Kt=n("Tvb5"),Qt=Object(Xt.c)({app:W.a,modals:Lt.b,proxies:Wt.a,rules:Kt.a,logs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case He:case Fe:return Object(pe.a)({},e,a);default:return e}},configs:st.a}),Zt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Xt.d;var Yt=Object(Xt.e)(Qt,Zt(Object(Xt.a)(Vt.a))),$t=(n("8dWu"),n("IqOL")),en=n.n($t),tn=r.a.lazy(function(){return n.e(1).then(n.bind(null,"wyCT"))}),nn=r.a.lazy(function(){return n.e(3).then(n.bind(null,"BVyM"))});window.store=Yt;var an=Object(p.hot)(function(){return r.a.createElement(V,null,r.a.createElement(l.a,{store:Yt},r.a.createElement(u.a,null,r.a.createElement("div",{className:en.a.app},r.a.createElement(Gt,null),r.a.createElement(d.a,{path:"/",render:function(){return r.a.createElement(ue,null)}}),r.a.createElement("div",{className:en.a.content},r.a.createElement(a.Suspense,{fallback:r.a.createElement(w,{height:"200px"}),maxDuration:10},r.a.createElement(d.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Te,null)}}),r.a.createElement(d.a,{exact:!0,path:"/overview",render:function(){return r.a.createElement(Te,null)}}),r.a.createElement(d.a,{exact:!0,path:"/configs",render:function(){return r.a.createElement(St,null)}}),r.a.createElement(d.a,{exact:!0,path:"/logs",render:function(){return r.a.createElement(it,null)}}),r.a.createElement(d.a,{exact:!0,path:"/proxies",render:function(){return r.a.createElement(tn,null)}}),r.a.createElement(d.a,{exact:!0,path:"/rules",render:function(){return r.a.createElement(nn,null)}})))))))});s.a.setAppElement("#app"),c.a.createRoot(document.getElementById("app")).render(r.a.createElement(an,null)),console.log("Checkout the repo: https://github.com/haishanh/yacd")},G8MJ:function(e,t,n){e.exports={overlay:"_1aZG3SnwLf",content:"_2LHk9jeQDw"}},II4a:function(e,t,n){"use strict";var a=n("ODXe"),r=n("q1tI"),o=n.n(r),c=n("SXSQ"),i=n("4BeY"),s=n.n(i),l=n("IaFt"),u=n.n(l),d=new s.a({id:"search",use:"search-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="search"><circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" /></symbol>'}),p=(u.a.add(d),d),f=n("u4Dv"),h=n("hbEN"),m=n("i1wY"),v=n.n(m);t.a=function(e){var t=e.mapStateToProps,n=e.actions;return Object(r.memo)(function(){var e=Object(f.b)(n).updateSearchText,i=Object(r.useMemo)(function(){return Object(h.a)(e,300)},[e]),s=Object(f.c)(t).searchText,l=Object(r.useState)(s),u=Object(a.a)(l,2),d=u[0],m=u[1];return o.a.createElement("div",{className:v.a.RuleSearch},o.a.createElement("div",{className:v.a.RuleSearchContainer},o.a.createElement("div",{className:v.a.inputWrapper},o.a.createElement("input",{type:"text",value:d,onChange:function(e){m(e.target.value),i(e.target.value)},className:v.a.input})),o.a.createElement("div",{className:v.a.iconWrapper},o.a.createElement(c.a,{id:p.id}))))})}},InNZ:function(e,t,n){e.exports={ToggleSwitch:"_1hOXHPZoyT",slider:"_2NWH7f7uzO"}},IqOL:function(e,t,n){e.exports={app:"_1zCe_vGIjz",content:"_2hH5WcxSWh"}},Jf6s:function(e,t,n){"use strict";n.d(t,"a",function(){return s});n("rGqo");var a=n("EJpJ"),r="/traffic",o=new TextDecoder("utf-8",{stream:!0}),c={labels:Array(150),up:Array(150),down:Array(150),size:150,subscribers:[],appendData:function(e){this.up.push(e.up),this.down.push(e.down);var t=new Date,n=""+t.getMinutes()+t.getSeconds();this.labels.push(n),this.up.length>this.size&&this.up.shift(),this.down.length>this.size&&this.down.shift(),this.labels.length>this.size&&this.labels.shift(),this.subscribers.forEach(function(t){return t(e)})},subscribe:function(e){var t=this;return this.subscribers.push(e),function(){var n=t.subscribers.indexOf(e);t.subscribers.splice(n,1)}}},i=!1;function s(e){if(i)return c;var t=Object(a.a)(e),n=t.url,s=t.init;return fetch(n+r,s).then(function(e){e.ok&&(i=!0,function e(t){return t.read().then(function(n){var a=n.done,r=n.value;if(a)return console.log("GET /traffic streaming done"),void(i=!1);var s=o.decode(r),l=JSON.parse(s);return c.appendData(l),e(t)})}(e.body.getReader()))}),c}},Kv4h:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("ODXe"),r=n("q1tI");function o(){var e=Object(r.useRef)(null),t=Object(r.useState)(200),n=Object(a.a)(t,2),o=n[0],c=n[1];var i=Object(r.useCallback)(function(){var t=e.current.getBoundingClientRect().top;c(window.innerHeight-t)},[]);return Object(r.useLayoutEffect)(function(){return i(),window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}},[]),[e,o]}},SXSQ:function(e,t,n){"use strict";var a=n("wx14"),r=n("Ff2n"),o=n("q1tI"),c=n.n(o),i=n("17x9"),s=n.n(i),l=n("TSYQ"),u=n.n(l),d=function(e){var t=e.id,n=e.width,o=void 0===n?20:n,i=e.height,s=void 0===i?20:i,l=e.className,d=Object(r.a)(e,["id","width","height","className"]),p=u()("icon",t,l),f="#"+t;return c.a.createElement("svg",Object(a.a)({className:p,width:o,height:s},d),c.a.createElement("use",{xlinkHref:f}))};d.propTypes={id:s.a.string.isRequired,width:s.a.number,height:s.a.number,className:s.a.string},t.a=c.a.memo(d)},So2z:function(e,t,n){e.exports={root:"_3WDSAUufkz",label:"_1su0iUCppI"}},Tvb5:function(e,t,n){"use strict";var a=n("vpQ4"),r=n("o0o1"),o=n.n(r),c=(n("ls82"),n("HaE+")),i=n("EJpJ"),s="/rules";function l(e){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(o.a.mark(function e(t){var n,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(i.a)(t),a=n.url,r=n.init,e.next=3,fetch(a+s,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var d=n("p19a"),p=n("QLaP"),f=n.n(p),h=n("G4qV");n.d(t,"e",function(){return v}),n.d(t,"d",function(){return b}),n.d(t,"f",function(){return y}),n.d(t,"b",function(){return O}),n.d(t,"c",function(){return E}),n.d(t,"a",function(){return j});var m=function(e){return e.rules.allRules},v=function(e){return e.rules.searchText},b=Object(h.a)(v,m,function(e,t){return""===e?t:t.filter(function(t){return t.payload.indexOf(e)>=0})}),g="rules/CompletedFetchRules",w="rule/UpdateSearchText";function y(e){return{type:w,payload:{searchText:e.toLowerCase()}}}function O(){return function(){var e=Object(c.a)(o.a.mark(function e(t,n){var a,r,c,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(d.b)(n()),e.next=3,l(a);case 3:return r=e.sent,e.next=6,r.json();case 6:c=e.sent,f()(c.rules&&c.rules.length>=0,"there is no valid rules list in the rules API response"),i=c.rules.map(function(e,t){return e.id=t,e}),t({type:g,payload:{allRules:i}});case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}function E(){return function(){var e=Object(c.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==m(n()).length){e.next=5;break}return e.next=4,t(O());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}var x={allRules:[],searchText:""};function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case w:case g:return Object(a.a)({},e,r);default:return e}}},"a/9k":function(e,t,n){e.exports={root:"_1vi9X6zp__",yacd:"_3a-vmAlkFb",link:"PdRbGY12nx"}},fvtS:function(e,t,n){"use strict";var a=n("4BeY"),r=n.n(a),o=n("IaFt"),c=n.n(o),i=new r.a({id:"globe",use:"globe-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="globe"><circle cx="12" cy="12" r="10" /><line x1="2" y1="12" x2="22" y2="12" /><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" /></symbol>'});c.a.add(i);t.a=i},i1wY:function(e,t,n){e.exports={RuleSearch:"wO91liFQQU",RuleSearchContainer:"KerXKV44-V",inputWrapper:"_1eCIOxLbbw",input:"_15uzlTthxn",iconWrapper:"_2YC46TUu3I"}},i53Z:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u});var a=n("rePB"),r=n("vpQ4"),o="modals/OpenModal",c="modals/CloseModal";function i(e){return{type:o,payload:e}}function s(e){return{type:c,payload:e}}var l={apiConfig:!1};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0,n=t.type,i=t.payload;switch(n){case o:return Object(r.a)({},l,Object(a.a)({},i,!0));case c:return Object(r.a)({},l,Object(a.a)({},i,!1));default:return e}}},oFgh:function(e,t,n){"use strict";var a=n("vpQ4"),r=n("o0o1"),o=n.n(r),c=(n("ls82"),n("HaE+")),i=n("EJpJ"),s="/configs";function l(e){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(o.a.mark(function e(t){var n,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(i.a)(t),a=n.url,r=n.init,e.next=3,fetch(a+s,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function d(e){return"socks-port"in e&&(e["socket-port"]=e["socks-port"]),e}function p(e,t){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(o.a.mark(function e(t,n){var r,c,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(i.a)(t),c=r.url,l=r.init,e.next=3,fetch(c+s,Object(a.a)({},l,{method:"PATCH",body:JSON.stringify(d(n))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var h=n("Jf6s"),m=n("i53Z"),v=n("p19a");n.d(t,"c",function(){return y}),n.d(t,"b",function(){return O}),n.d(t,"d",function(){return E}),n.d(t,"a",function(){return j});var b="configs/CompletedFetchConfigs",g="configs/OptimisticUpdateConfigs",w="configs/MarkHaveFetchedConfig",y=function(e){return e.configs};function O(){return function(){var e=Object(c.a)(o.a.mark(function e(t,n){var a,r,c,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(v.b)(n()),e.next=4,l(r);case 4:a=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.log("Error fetch configs",e.t0),t(Object(m.c)("apiConfig")),e.abrupt("return");case 12:if(a.ok){e.next=15;break}return 404===a.status||401===a.status?t(Object(m.c)("apiConfig")):console.log("Error fetch configs",a.statusText),e.abrupt("return");case 15:return e.next=17,a.json();case 17:c=e.sent,t({type:b,payload:c}),y(n()).haveFetchedConfig?(i=Object(v.b)(n()),h.a(i)):t({type:w,payload:{haveFetchedConfig:!0}});case 21:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}()}function E(e){return function(){var t=Object(c.a)(o.a.mark(function t(n,r){var c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:p(Object(v.b)(r()),e).then(function(e){!1===e.ok&&console.log("Error update configs",e.statusText)},function(e){throw console.log("Error update configs",e),e}).then(function(){n(O())}),c=y(r()),n({type:g,payload:Object(a.a)({},c,e)});case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}var x={port:7890,"socks-port":7891,"redir-port":0,"allow-lan":!1,mode:"Rule","log-level":"info",haveFetchedConfig:!1};function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case w:case g:case b:return Object(a.a)({},e,r);default:return e}}},oPlX:function(e,t,n){e.exports={root:"_2kIwVmZrIm",logoLink:"fD4vFw6Suh",logo:"_3MSOuOjw1N",rows:"ARkuP2UF9U",row:"_3s-CY8UZIW",rowActive:"z0TS5nXW6e",label:"_9C_umw6HLy",themeSwitchContainer:"akNaLv2foe"}},p19a:function(e,t,n){"use strict";var a=n("vpQ4"),r=n("ODXe"),o=(n("KKXr"),n("OG14"),n("o0o1")),c=n.n(o),i=(n("pIFo"),n("ls82"),n("HaE+"));function s(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){}}var l=n("oFgh"),u=n("i53Z");n.d(t,"b",function(){return h}),n.d(t,"c",function(){return m}),n.d(t,"e",function(){return v}),n.d(t,"d",function(){return w}),n.d(t,"a",function(){return E});var d="app/UpdateClashAPIConfig",p="app/SwitchTheme",f="yacd.haishan.me",h=function(e){return e.app.clashAPIConfig},m=function(e){return e.app.theme};function v(e){var t=e.hostname,n=e.port,a=e.secret;return function(){var e=Object(i.a)(c.a.mark(function e(r,o){var i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t.trim().replace(/^http(s):\/\//,""),r({type:d,payload:{hostname:i,port:n,secret:a}}),s(f,o().app),r(Object(u.a)("apiConfig")),r(Object(l.b)());case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}var b=document.body;function g(){"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark")?(b.classList.remove("light"),b.classList.add("dark")):(b.classList.remove("dark"),b.classList.add("light"))}function w(){return function(e,t){var n="light"===m(t())?"dark":"light";g(n),e({type:p,payload:{theme:n}}),s(f,t().app)}}var y={clashAPIConfig:{hostname:"127.0.0.1",port:"7892",secret:""},theme:"dark"};function O(){var e=function(e){try{var t=localStorage.getItem(e);if(!t)return;return JSON.parse(t)}catch(e){return}}(f);e||(e=y);var t=function(){var e=location.search,t={};if("string"!=typeof e||""===e)return t;for(var n=e.replace(/^\?/,"").split("&"),a=0;a<n.length;a++){var o=n[a].split("="),c=Object(r.a)(o,2),i=c[0],s=c[1];t[i]=encodeURIComponent(s)}return t}();return t.port&&(e.clashAPIConfig.port=t.port),t.secret&&(e.clashAPIConfig.secret=t.secret),g(e.theme),e}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O(),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case d:return Object(a.a)({},e,{clashAPIConfig:Object(a.a)({},r)});case p:return Object(a.a)({},e,r);default:return e}}},t8vU:function(e,t,n){e.exports={logMeta:"_2NcK3n4XfS",logType:"_1VGUXJPYcC",logTime:"gCXzfg0oD0",logText:"_2xrBv_irGt",logsWrapper:"_3DQv5_YG6N",log:"_33sOhzRCb3",logPlaceholder:"_2vDkW41OaJ",logPlaceholderIcon:"-N8zaF3LNs"}},u4Dv:function(e,t,n){"use strict";var a=n("ODXe"),r=n("q1tI"),o=n.n(r),c=n("17x9"),i=n.n(c),s=n("ANjH"),l=(n("rGqo"),n("yt8O"),n("RW0V"),n("U8pU")),u=Object.prototype.hasOwnProperty;function d(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}n.d(t,"a",function(){return f}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return v});var p=Object(r.createContext)(null);function f(e){var t=e.store,n=e.children;return o.a.createElement(p.Provider,{value:t},n)}function h(){return Object(r.useContext)(p)}function m(e){var t=h().dispatch;return Object(r.useMemo)(function(){return function(e,t){var n="function"==typeof e?e():e;return Object(s.b)(n,t)}(e,t)},[e])}function v(e){var t=h(),n=e(t.getState()),o=Object(r.useState)(n),c=Object(a.a)(o,2),i=c[0],s=c[1];return Object(r.useEffect)(function(){var n=i;return t.subscribe(function(){var a=e(t.getState());(function(e,t){if(d(e,t))return!0;if("object"!==Object(l.a)(e)||null===e||"object"!==Object(l.a)(t)||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var r=0;r<n.length;r++)if(!u.call(t,n[r])||!d(e[n[r]],t[n[r]]))return!1;return!0})(n,a)||(n=a,s(a))})},[]),i}f.propTypes={store:i.a.object,children:i.a.node}},uSrA:function(e,t,n){e.exports={switch:"_1HMH3rGR_r"}}},[[0,4,2,5]],[1,3,6]]);